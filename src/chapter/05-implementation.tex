% !TEX root = ../report.tex

\chapter{Implementation}

\minitoc

This chapter discusses the major requirements, and implementation of the different algorithms and datastructures in the system. And is meant for the reader to get insight into what was actually implemented.

TODO: Something about each section after done
\clearpage

\section{Major Requirements}\label{impl:Major Requirements}
\subsection{FR1}
\begin{quotation}
\em The system must be able to harvest tweets and/or users from Twitter that are related to a movie in the Netflix-dataset %not to edit, unless edit for all
\end{quotation}

The fields Scrape and REST are implemented. Scrape can harvest tweets and users related to a movie title. REST can retrieve users related to users that relate to tweets about movies. Stream is implemented in a side project for quick iteration and hands-on testing. It can retrieve tweets related to movie titles.

The harvesters implemented are
\begin{itemize}
\item NetflixMovieTweetScrape
\item TwitterUserFolloweeREST
\end{itemize}

NetflixMovieTweetScrape iterates through all netflix movies and uses the field Scrape to harvest tweets related to each netflix movie. TwitterUserFolloweeREST iterates over all twitter users in storage and uses the field REST to harvest followees for this user.

Thus, the system can harvest tweets and users from Twitter related to movies in the netflix dataset and the requirement is therefore implemented.

\subsection{FR6}
\begin{quotation}
\em The system must be able to supplement Netflix-dataset with tweets and/or users from Twitter that are related to a movie in the Netflix-dataset %not to edit, unless edit for all
\end{quotation}

Because a dataset could not be retrieved from Twitter due to time constraints on the API based fields and legal constraints on the Scrape field there was no complete set of twitter data points to build a dataset with. The dataset building algorithm was not implemented. Thus, this requirement was not implemented, but remains a task for further work.

\subsection{FR7}
\begin{quotation}
\em The system must be able to predict ratings of the movies for all users in any dataset that reflects the Netflix dataset %not to edit, unless edit for all
\end{quotation}

Since the data from twitter is not gathered and combined with the Netflix-data this requirement is not implemented, but rather a task for further work.

\subsection{NFR1}
\begin{quotation}
\em The system must be able to cost efficiently predict a rating of a movie for a given user %not to edit, unless edit for all
\end{quotation}


\section{Data structures}\label{impl:Data structures}
\subsection{NoSQL Database Mapping}
In order to achieve synchronization with mongoDB, the datamapper MongoMapper is used. MongoMapper ensures that an database record that is associated with an object is automatically updated when one of the objects attributes are changed. In the case of Twilm, these are all classes in the module Models.

The attributes are referred to as keys in MongoMapper. Instead of declaring variables in a regular ruby fashion, mongomapper keys are declared. An example of a key used in the implementation for a TwitterUser is "key name".

MongoMappers relationship descriptors are also utilized. When an object is pointing to many instances of another object, the descriptor many can be used instead of declaring a regular variable. When an object is pointing to one instance of another object, the keyword one is used. An example used in the implementation for TwitterUser is "many twitter\_tweets" and conversely, "one twitter\_user" in TwitterTweet.

Validations in mongomapper are used to ensure that certain keys and relationships are not stored with nil values. In the implementation, validations are used wherever there is a key that should always be stored. An example is "validates\_presence\_of text" in TwitterTweet.


\subsection{Data structure: Netflix}
\subsubsection{User}
\subsubsection{Movie}

\subsection{Data structure: Twitter}
\subsubsection{Tweet}
\subsubsection{User}

\subsection{Data structure: Dataset}
Not implemented.
\subsection{Data structure: Prediction}
Not implemented.

\section{Functional Modules}\label{impl:Functional Modules}

\subsection{FunctionalFields}
\subsection{Harvesters}

\section{Testing}\label{impl:Testing}
Også diskuter hvordan du har tenkt å utføre testen din (validering og evaluering).
